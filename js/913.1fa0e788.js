"use strict";(self["webpackChunkcopan_sizing_tool"]=self["webpackChunkcopan_sizing_tool"]||[]).push([[913],{7191:function(e,a,s){function t(e){const a=new Date(Date.UTC(2017,0,1)),s=[];for(let t=0;t<7;t++)s.push(a.toLocaleDateString(e,{weekday:"long"})),a.setDate(a.getDate()+1);return s}function n(e){const a=[],s=[];return e.primaryProtocols.forEach((t=>{const n=e.primaryProtocols.map((e=>e.samplesPerDayAvg)).reduce(((e,a)=>e+a)),o=[];for(let e=0;e<7;e++)o.push({dayOfWeek:e,samples:0});const d=[];for(let e=0;e<7;e++)d.push({dayOfWeek:e,samples:0});let i=0;const l=Math.max(...t.wasplabData.air.readHours.split(",").map((e=>Number(e)))||[]);if(l>24){const a=new Date(Date.UTC(2017,0,1)),s=new Date(a.getTime()+60*l*60*1e3);i=s.getDay()-a.getDay();for(let d=0;d<7;d++)for(let a=1;a<=i;a++){let s=d+a;s>6&&(s=0);const i=o.findIndex((e=>e.dayOfWeek==d));if(i>=0){const a=o.findIndex((e=>e.dayOfWeek==s));if(a>-1){const s=e.samplesPerDay.find((e=>e.dayOfWeek==d))?.samples||0;o[a].samples+=(t.wasplabData.air?.platesPerSample||0)*(t.samplesPerDayAvg/n*s)}}}}let p=0;const c=Math.max(...t.wasplabData.co2.readHours.split(",").map((e=>Number(e)))||[]);if(c>24){const a=new Date(Date.UTC(2017,0,1)),s=new Date(a.getTime()+60*c*60*1e3);p=s.getDay()-a.getDay();for(let o=0;o<7;o++)for(let a=1;a<=p;a++){let s=o+a;s>6&&(s=0);const i=d.findIndex((e=>e.dayOfWeek==o));if(i>=0){const a=e.samplesPerDay.find((e=>e.dayOfWeek==o))?.samples||0,i=d.findIndex((e=>e.dayOfWeek==s));i>-1&&(d[i].samples+=(t.wasplabData.co2?.platesPerSample||0)*(t.samplesPerDayAvg/n*a))}}}const r=[];for(let a=0;a<7;a++){let s=a+i;s>=7&&(s-=7);const o=e.samplesPerDay.find((e=>e.dayOfWeek==a))?.samples||0;r.push({dayOfWeek:s,samples:(t.wasplabData.air?.platesPerSample||0)*(t.samplesPerDayAvg/n*o)})}const m=[];for(let a=0;a<7;a++){let s=a+p;s>=7&&(s-=7);const o=e.samplesPerDay.find((e=>e.dayOfWeek==a))?.samples||0;m.push({dayOfWeek:s,samples:(t.wasplabData.co2?.platesPerSample||0)*(t.samplesPerDayAvg/n*o)})}for(let y=0;y<7;y++){const i=e.samplesPerDay.find((e=>e.dayOfWeek==y))?.samples||0,l=t.waspData.platesPerSample*(t.samplesPerDayAvg/n*i),p=Math.ceil(l),c=e.settings.plates.streakingPatterns.find((e=>e.pattern==t.waspData.streakingPattern))?.timeInSeconds||0,f=p*c,u=t.waspData.slidesPerSample*(t.samplesPerDayAvg/n*i),g=Math.ceil(u);let k=e.settings.slides.streakingPatterns.find((e=>"slide_and_other"==e.pattern))?.timeInSeconds||0;0==t.waspData.platesPerSample&&(k=e.settings.slides.streakingPatterns.find((e=>"slide_only"==e.pattern))?.timeInSeconds||0);const I=g*k,O=t.waspData.brothsPerSample*(t.samplesPerDayAvg/n*i),W=Math.ceil(O),S=e.settings.broths.timeInSeconds,h=W*S,_=(t.wasplabData.air?.platesPerSample||0)*(t.samplesPerDayAvg/n*i),D=Math.ceil(_),P=e.settings.incubator.loadingPlatesPerHour,b=D/P*3600,w=(t.wasplabData.co2?.platesPerSample||0)*(t.samplesPerDayAvg/n*i),x=Math.ceil(w),M=e.settings.incubator.loadingPlatesPerHour,v=x/M*3600,T=(t.wasplabData.air?.platesPerSample||0)*(t.samplesPerDayAvg/n*i),C=Math.ceil(T+(o.find((e=>e.dayOfWeek==y))?.samples||0)),H=e.settings.incubator.recordingPlatesPerHour,A=C/H*3600,q=(t.wasplabData.co2?.platesPerSample||0)*(t.samplesPerDayAvg/n*i),U=Math.ceil(q+(d.find((e=>e.dayOfWeek==y))?.samples||0)),Z=e.settings.incubator.recordingPlatesPerHour,j=U/Z*3600;let E=e.settings.incubator.unloadingMultiplePlatesPerHour;1==e.settings.incubator.singleIncubator&&(E=e.settings.incubator.unloadingSinglePlatesPerHour);const N=r.find((e=>e.dayOfWeek==y))?.samples||0,L=Math.ceil(N),z=E,F=L/z*3600,Q=m.find((e=>e.dayOfWeek==y))?.samples||0,B=Math.ceil(Q),G=E,J=B/G*3600,K=a.findIndex((e=>"plates"==e.type&&e.dayOfWeek==y));K<0?a.push({type:"plates",dayOfWeek:y,timeInSeconds:f,samples:p}):a[K].timeInSeconds+=f,s.push({type:"plates",dayOfWeek:y,timeInSeconds:f,samples:p,protocol:t.id});const R=a.findIndex((e=>"slides"==e.type&&e.dayOfWeek==y));R<0?a.push({type:"slides",dayOfWeek:y,timeInSeconds:I,samples:g}):a[R].timeInSeconds+=I,s.push({type:"slides",dayOfWeek:y,timeInSeconds:I,samples:g,protocol:t.id});const V=a.findIndex((e=>"broths"==e.type&&e.dayOfWeek==y));V<0?a.push({type:"broths",dayOfWeek:y,timeInSeconds:h,samples:W}):a[V].timeInSeconds+=h,s.push({type:"broths",dayOfWeek:y,timeInSeconds:h,samples:W,protocol:t.id});const X=a.findIndex((e=>"loading_air"==e.type&&e.dayOfWeek==y));X<0?a.push({type:"loading_air",dayOfWeek:y,timeInSeconds:b,samples:D}):a[X].timeInSeconds+=b,s.push({type:"loading_air",dayOfWeek:y,timeInSeconds:b,samples:D,protocol:t.id});const Y=a.findIndex((e=>"loading_co2"==e.type&&e.dayOfWeek==y));Y<0?a.push({type:"loading_co2",dayOfWeek:y,timeInSeconds:v,samples:x}):a[Y].timeInSeconds+=v,s.push({type:"loading_co2",dayOfWeek:y,timeInSeconds:v,samples:x,protocol:t.id});const $=a.findIndex((e=>"recording_air"==e.type&&e.dayOfWeek==y));$<0?a.push({type:"recording_air",dayOfWeek:y,timeInSeconds:A,samples:C}):a[$].timeInSeconds+=A,s.push({type:"recording_air",dayOfWeek:y,timeInSeconds:A,samples:C,protocol:t.id});const ee=a.findIndex((e=>"recording_co2"==e.type&&e.dayOfWeek==y));ee<0?a.push({type:"recording_co2",dayOfWeek:y,timeInSeconds:j,samples:U}):a[ee].timeInSeconds+=j,s.push({type:"recording_co2",dayOfWeek:y,timeInSeconds:j,samples:U,protocol:t.id});const ae=a.findIndex((e=>"unloading_air"==e.type&&e.dayOfWeek==y));ae<0?a.push({type:"unloading_air",dayOfWeek:y,timeInSeconds:F,samples:L}):a[ae].timeInSeconds+=F,s.push({type:"unloading_air",dayOfWeek:y,timeInSeconds:F,samples:L,protocol:t.id});const se=a.findIndex((e=>"unloading_co2"==e.type&&e.dayOfWeek==y));se<0?a.push({type:"unloading_co2",dayOfWeek:y,timeInSeconds:J,samples:B}):a[se].timeInSeconds+=J,s.push({type:"unloading_co2",dayOfWeek:y,timeInSeconds:J,samples:B,protocol:t.id})}})),e.secondaryProtocols.forEach((t=>{const n=e.secondaryProtocols.map((e=>e.samples)).reduce(((e,a)=>e+a)),o=[];for(let e=0;e<7;e++)o.push({dayOfWeek:e,samples:0});const d=[];for(let e=0;e<7;e++)d.push({dayOfWeek:e,samples:0});let i=0;const l=Math.max(...t.recordingO2.split(",").map((e=>Number(e)))||[]);if(l>24){const a=new Date(Date.UTC(2017,0,1)),s=new Date(a.getTime()+60*l*60*1e3);i=s.getDay()-a.getDay();for(let d=0;d<7;d++)for(let a=1;a<=i;a++){let s=d+a;s>6&&(s=0);const i=o.findIndex((e=>e.dayOfWeek==d));if(i>=0){const a=o.findIndex((e=>e.dayOfWeek==s));if(a>-1){const s=e.samplesPerDay.find((e=>e.dayOfWeek==d))?.samples||0;o[a].samples+=(t.platesO2||0)*(t.samples/n*s)}}}}let p=0;const c=Math.max(...t.recordingCO2.split(",").map((e=>Number(e)))||[]);if(c>24){const a=new Date(Date.UTC(2017,0,1)),s=new Date(a.getTime()+60*c*60*1e3);p=s.getDay()-a.getDay();for(let o=0;o<7;o++)for(let a=1;a<=p;a++){let s=o+a;s>6&&(s=0);const i=d.findIndex((e=>e.dayOfWeek==o));if(i>=0){const a=e.samplesPerDay.find((e=>e.dayOfWeek==o))?.samples||0,i=d.findIndex((e=>e.dayOfWeek==s));i>-1&&(d[i].samples+=(t.platesCO2||0)*(t.samples/n*a))}}}const r=[];for(let a=0;a<7;a++){let s=a+i;s>=7&&(s-=7);const o=e.samplesPerDay.find((e=>e.dayOfWeek==a))?.samples||0;r.push({dayOfWeek:s,samples:(t.platesO2||0)*(t.samples/n*o)})}const m=[];for(let a=0;a<7;a++){let s=a+p;s>=7&&(s-=7);const o=e.samplesPerDay.find((e=>e.dayOfWeek==a))?.samples||0;m.push({dayOfWeek:s,samples:(t.platesCO2||0)*(t.samples/n*o)})}const y=e.settings.plates.streakingPatterns.find((a=>a.pattern==e.primaryProtocols.find((e=>e.id==t.id))?.waspData.streakingPattern))?.timeInSeconds||0;for(let f=0;f<7;f++){const i=e.samplesPerDay.find((e=>e.dayOfWeek==f))?.samples||0,l=t.plates*(t.samples/n*i),p=Math.ceil(l),c=y,u=p*c,g=(t.platesO2||0)*(t.samples/n*i),k=Math.ceil(g),I=e.settings.incubator.loadingPlatesPerHour,O=k/I*3600,W=(t.platesCO2||0)*(t.samples/n*i),S=Math.ceil(W),h=e.settings.incubator.loadingPlatesPerHour,_=S/h*3600,D=(t.platesO2||0)*(t.samples/n*i),P=Math.ceil(D+(o.find((e=>e.dayOfWeek==f))?.samples||0)),b=e.settings.incubator.recordingPlatesPerHour,w=P/b*3600,x=(t.platesCO2||0)*(t.samples/n*i),M=Math.ceil(x+(d.find((e=>e.dayOfWeek==f))?.samples||0)),v=e.settings.incubator.recordingPlatesPerHour,T=M/v*3600;let C=e.settings.incubator.unloadingMultiplePlatesPerHour;1==e.settings.incubator.singleIncubator&&(C=e.settings.incubator.unloadingSinglePlatesPerHour);const H=r.find((e=>e.dayOfWeek==f))?.samples||0,A=Math.ceil(H),q=C,U=A/q*3600,Z=m.find((e=>e.dayOfWeek==f))?.samples||0,j=Math.ceil(Z),E=C,N=j/E*3600,L=a.findIndex((e=>"plates"==e.type&&e.dayOfWeek==f));L<0?a.push({type:"plates",dayOfWeek:f,timeInSeconds:u,samples:p}):a[L].timeInSeconds+=u,s.push({type:"plates",dayOfWeek:f,timeInSeconds:u,samples:p,protocol:t.id});const z=a.findIndex((e=>"loading_air"==e.type&&e.dayOfWeek==f));z<0?a.push({type:"loading_air",dayOfWeek:f,timeInSeconds:O,samples:k}):a[z].timeInSeconds+=O,s.push({type:"loading_air",dayOfWeek:f,timeInSeconds:O,samples:k,protocol:t.id});const F=a.findIndex((e=>"loading_co2"==e.type&&e.dayOfWeek==f));F<0?a.push({type:"loading_co2",dayOfWeek:f,timeInSeconds:_,samples:S}):a[F].timeInSeconds+=_,s.push({type:"loading_co2",dayOfWeek:f,timeInSeconds:_,samples:S,protocol:t.id});const Q=a.findIndex((e=>"recording_air"==e.type&&e.dayOfWeek==f));Q<0?a.push({type:"recording_air",dayOfWeek:f,timeInSeconds:w,samples:P}):a[Q].timeInSeconds+=w,s.push({type:"recording_air",dayOfWeek:f,timeInSeconds:w,samples:P,protocol:t.id});const B=a.findIndex((e=>"recording_co2"==e.type&&e.dayOfWeek==f));B<0?a.push({type:"recording_co2",dayOfWeek:f,timeInSeconds:T,samples:M}):a[B].timeInSeconds+=T,s.push({type:"recording_co2",dayOfWeek:f,timeInSeconds:T,samples:M,protocol:t.id});const G=a.findIndex((e=>"unloading_air"==e.type&&e.dayOfWeek==f));G<0?a.push({type:"unloading_air",dayOfWeek:f,timeInSeconds:U,samples:A}):a[G].timeInSeconds+=U,s.push({type:"unloading_air",dayOfWeek:f,timeInSeconds:U,samples:A,protocol:t.id});const J=a.findIndex((e=>"unloading_co2"==e.type&&e.dayOfWeek==f));J<0?a.push({type:"unloading_co2",dayOfWeek:f,timeInSeconds:N,samples:j}):a[J].timeInSeconds+=N,s.push({type:"unloading_co2",dayOfWeek:f,timeInSeconds:N,samples:j,protocol:t.id})}})),console.log(a),{weightedDaysTimesInSeconds:a,weightedDaysTimesInSecondsPerProtocol:s}}function o(e){const a=[];return e.forEach((e=>{if("plates"==e.type||"slides"==e.type||"broths"==e.type){const s=a.findIndex((a=>a.dayOfWeek==e.dayOfWeek&&"wasp"==a.type));s<0?a.push({type:"wasp",dayOfWeek:e.dayOfWeek,timeInSeconds:e.timeInSeconds}):a[s].timeInSeconds+=e.timeInSeconds}else if("loading_air"==e.type){const s=a.findIndex((a=>a.dayOfWeek==e.dayOfWeek&&"wasplab_air_loading"==a.type));s<0?a.push({type:"wasplab_air_loading",dayOfWeek:e.dayOfWeek,timeInSeconds:e.timeInSeconds}):a[s].timeInSeconds<e.timeInSeconds&&(a[s].timeInSeconds=e.timeInSeconds)}else if("loading_co2"==e.type){const s=a.findIndex((a=>a.dayOfWeek==e.dayOfWeek&&"wasplab_co2_loading"==a.type));s<0?a.push({type:"wasplab_co2_loading",dayOfWeek:e.dayOfWeek,timeInSeconds:e.timeInSeconds}):a[s].timeInSeconds<e.timeInSeconds&&(a[s].timeInSeconds=e.timeInSeconds)}else if("recording_air"==e.type){const s=a.findIndex((a=>a.dayOfWeek==e.dayOfWeek&&"wasplab_air_recording"==a.type));s<0?a.push({type:"wasplab_air_recording",dayOfWeek:e.dayOfWeek,timeInSeconds:e.timeInSeconds}):a[s].timeInSeconds<e.timeInSeconds&&(a[s].timeInSeconds=e.timeInSeconds)}else if("recording_co2"==e.type){const s=a.findIndex((a=>a.dayOfWeek==e.dayOfWeek&&"wasplab_co2_recording"==a.type));s<0?a.push({type:"wasplab_co2_recording",dayOfWeek:e.dayOfWeek,timeInSeconds:e.timeInSeconds}):a[s].timeInSeconds<e.timeInSeconds&&(a[s].timeInSeconds=e.timeInSeconds)}else if("unloading_air"==e.type){const s=a.findIndex((a=>a.dayOfWeek==e.dayOfWeek&&"wasplab_air_unloading"==a.type));s<0?a.push({type:"wasplab_air_unloading",dayOfWeek:e.dayOfWeek,timeInSeconds:e.timeInSeconds}):a[s].timeInSeconds+=e.timeInSeconds}else if("unloading_co2"==e.type){const s=a.findIndex((a=>a.dayOfWeek==e.dayOfWeek&&"wasplab_co2_unloading"==a.type));s<0?a.push({type:"wasplab_co2_unloading",dayOfWeek:e.dayOfWeek,timeInSeconds:e.timeInSeconds}):a[s].timeInSeconds+=e.timeInSeconds}})),a}function d(e){const a=e.data.find((e=>"wasp"==e.type))?.timeInSeconds||0,s=e.data.find((e=>"wasplab_air_loading"==e.type))?.timeInSeconds||0,t=e.data.find((e=>"wasplab_co2_loading"==e.type))?.timeInSeconds||0,n=Math.max(s,t),o=e.data.find((e=>"wasplab_air_recording"==e.type))?.timeInSeconds||0,d=e.data.find((e=>"wasplab_co2_recording"==e.type))?.timeInSeconds||0,i=Math.max(o,d),l=e.data.find((e=>"wasplab_air_unloading"==e.type))?.timeInSeconds||0,p=e.data.find((e=>"wasplab_co2_unloading"==e.type))?.timeInSeconds||0,c=l+p,r=Math.max(a,n)+i+c;return{dayOfWeek:e.dayOfWeek,totalTime:r,percentage:r/3600/24*100,totalSamples:e.samples,isPeakDay:!1}}function i(e){const a=[];for(let s=0;s<7;s++){const t=e.data.filter((e=>e.dayOfWeek==s)),n=d({data:t,dayOfWeek:s,samples:e.samplesPerDay.find((e=>e.dayOfWeek==s))?.samples||0});a.push(n)}return a.sort(((e,a)=>a.totalTime-e.totalTime)),a.forEach((e=>{e.percentage=e.totalTime/a[0].totalTime*100,100==e.percentage&&(e.isPeakDay=!0)})),a.sort(((e,a)=>e.dayOfWeek-a.dayOfWeek)),a}s.d(a,{mg:function(){return n},o2:function(){return o},tu:function(){return t},xL:function(){return i}})},2913:function(e,a,s){s.d(a,{Z:function(){return f}});var t=s(9269);const n=(0,t.Uk)("Daily volumes");function o(e,a,s,o,d,i){const l=(0,t.up)("q-item-label"),p=(0,t.up)("apexchart"),c=(0,t.up)("q-card");return e.dailyData.length>0?((0,t.wg)(),(0,t.j4)(c,{key:0,class:"q-pa-sm q-mt-sm"},{default:(0,t.w5)((()=>[e.showTitle?((0,t.wg)(),(0,t.j4)(l,{key:0,class:"q-mb-sm",overline:""},{default:(0,t.w5)((()=>[n])),_:1})):(0,t.kq)("",!0),(0,t.Wm)(p,{type:"bar",options:e.chartOptions,series:e.series},null,8,["options","series"])])),_:1})):(0,t.kq)("",!0)}var d=s(7191),i=(0,t.aZ)({name:"DailyChart",props:{dailyData:{type:Object,required:!0},showTitle:{type:Object,required:!1}},setup(){const e=(0,d.tu)("en-US");e.push(e[0]),e.splice(0,1);const a={chart:{id:"vuechart-dailydata"},xaxis:{categories:e},yaxis:{max:100},colors:[function({value:e}){return"100.00"==e?"#022A55":"#7794FB"}]};return{weekDays:e,chartOptions:a}},computed:{series(){const e=this.dailyData.map((e=>e.percentage.toFixed(2))),a=[{name:"series-dailydata",data:e}];return a}}}),l=s(7617),p=s(8055),c=s(3712),r=s(1410),m=s.n(r);const y=(0,l.Z)(i,[["render",o]]);var f=y;m()(i,"components",{QCard:p.Z,QItemLabel:c.Z})}}]);
//# sourceMappingURL=913.1fa0e788.js.map