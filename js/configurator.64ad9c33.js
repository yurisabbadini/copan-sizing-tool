"use strict";(self["webpackChunkcopan_sizing_tool"]=self["webpackChunkcopan_sizing_tool"]||[]).push([[480],{8579:function(e,o,a){a.d(o,{Z:function(){return d}});var t=a(3856),l=(a(7120),a(9269)),n=a(64),i=a(4300);const s={position:{type:String,default:"bottom-right",validator:e=>["top-right","top-left","bottom-right","bottom-left","top","right","bottom","left"].includes(e)},offset:{type:Array,validator:e=>2===e.length},expand:Boolean};function r(){const{props:e,proxy:o}=(0,l.FN)(),{$q:a}=o,t=(0,l.f3)(i.YE,(()=>{console.error("QPageSticky needs to be child of QLayout")})),s=(0,l.Fl)((()=>{const o=e.position;return{top:o.indexOf("top")>-1,right:o.indexOf("right")>-1,bottom:o.indexOf("bottom")>-1,left:o.indexOf("left")>-1,vertical:"top"===o||"bottom"===o,horizontal:"left"===o||"right"===o}})),r=(0,l.Fl)((()=>t.header.offset)),d=(0,l.Fl)((()=>t.right.offset)),p=(0,l.Fl)((()=>t.footer.offset)),u=(0,l.Fl)((()=>t.left.offset)),c=(0,l.Fl)((()=>{let o=0,t=0;const l=s.value,n=!0===a.lang.rtl?-1:1;!0===l.top&&0!==r.value?t=`${r.value}px`:!0===l.bottom&&0!==p.value&&(t=-p.value+"px"),!0===l.left&&0!==u.value?o=n*u.value+"px":!0===l.right&&0!==d.value&&(o=-n*d.value+"px");const i={transform:`translate(${o}, ${t})`};return e.offset&&(i.margin=`${e.offset[1]}px ${e.offset[0]}px`),!0===l.vertical?(0!==u.value&&(i[!0===a.lang.rtl?"right":"left"]=`${u.value}px`),0!==d.value&&(i[!0===a.lang.rtl?"left":"right"]=`${d.value}px`)):!0===l.horizontal&&(0!==r.value&&(i.top=`${r.value}px`),0!==p.value&&(i.bottom=`${p.value}px`)),i})),m=(0,l.Fl)((()=>`q-page-sticky row flex-center fixed-${e.position} q-page-sticky--`+(!0===e.expand?"expand":"shrink")));function f(o){const a=(0,n.KR)(o.default);return(0,l.h)("div",{class:m.value,style:c.value},!0===e.expand?a:[(0,l.h)("div",a)])}return{$layout:t,getStickyContent:f}}var d=(0,t.L)({name:"QPageSticky",props:s,setup(e,{slots:o}){const{getStickyContent:a}=r();return()=>a(o)}})},4487:function(e,o,a){a.d(o,{Z:function(){return u}});var t=a(9269),l=a(6237),n=a(2952),i=a(570),s=a(3856);function r(e,o=new WeakMap){if(Object(e)!==e)return e;if(o.has(e))return o.get(e);const a=e instanceof Date?new Date(e):e instanceof RegExp?new RegExp(e.source,e.flags):e instanceof Set?new Set:e instanceof Map?new Map:"function"!==typeof e.constructor?Object.create(null):void 0!==e.prototype&&"function"===typeof e.prototype.constructor?e:new e.constructor;if("function"===typeof e.constructor&&"function"===typeof e.valueOf){const a=e.valueOf();if(Object(a)!==a){const t=new e.constructor(a);return o.set(e,t),t}}return o.set(e,a),e instanceof Set?e.forEach((e=>{a.add(r(e,o))})):e instanceof Map&&e.forEach(((e,t)=>{a.set(t,r(e,o))})),Object.assign(a,...Object.keys(e).map((a=>({[a]:r(e[a],o)}))))}var d=a(728),p=a(3613),u=(0,s.L)({name:"QPopupEdit",props:{modelValue:{required:!0},title:String,buttons:Boolean,labelSet:String,labelCancel:String,color:{type:String,default:"primary"},validate:{type:Function,default:()=>!0},autoSave:Boolean,cover:{type:Boolean,default:!0},disable:Boolean},emits:["update:modelValue","save","cancel","before-show","show","before-hide","hide"],setup(e,{slots:o,emit:a}){const{proxy:s}=(0,t.FN)(),{$q:u}=s,c=(0,l.iH)(null),m=(0,l.iH)(""),f=(0,l.iH)("");let w=!1;const g=(0,t.Fl)((()=>{const o={initialValue:m.value,validate:e.validate,set:y,cancel:b,updatePosition:h};return(0,p.g)(o,"value",(()=>f.value),(e=>{f.value=e})),o}));function y(){!1!==e.validate(f.value)&&(!0===v()&&(a("save",f.value,m.value),a("update:modelValue",f.value)),k())}function b(){!0===v()&&a("cancel",f.value,m.value),k()}function h(){(0,t.Y3)((()=>{c.value.updatePosition()}))}function v(){return!1===(0,d.xb)(f.value,m.value)}function k(){w=!0,c.value.hide()}function P(){w=!1,m.value=r(e.modelValue),f.value=r(e.modelValue),a("before-show")}function O(){a("show")}function W(){!1===w&&!0===v()&&(!0===e.autoSave&&!0===e.validate(f.value)?(a("save",f.value,m.value),a("update:modelValue",f.value)):a("cancel",f.value,m.value)),a("before-hide")}function V(){a("hide")}function U(){const a=void 0!==o.default?[].concat(o.default(g.value)):[];return e.title&&a.unshift((0,t.h)("div",{class:"q-dialog__title q-mt-sm q-mb-sm"},e.title)),!0===e.buttons&&a.push((0,t.h)("div",{class:"q-popup-edit__buttons row justify-center no-wrap"},[(0,t.h)(i.Z,{flat:!0,color:e.color,label:e.labelCancel||u.lang.label.cancel,onClick:b}),(0,t.h)(i.Z,{flat:!0,color:e.color,label:e.labelSet||u.lang.label.set,onClick:y})])),a}return Object.assign(s,{set:y,cancel:b,show(e){null!==c.value&&c.value.show(e)},hide(e){null!==c.value&&c.value.hide(e)},updatePosition:h}),()=>{if(!0!==e.disable)return(0,t.h)(n.Z,{ref:c,class:"q-popup-edit",cover:e.cover,onBeforeShow:P,onShow:O,onBeforeHide:W,onHide:V,onEscapeKey:b},U)}}})},6830:function(e,o,a){var t;a.d(o,{Z:function(){return f}});var l=new Uint8Array(16);function n(){if(!t&&(t="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),!t))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return t(l)}var i=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function s(e){return"string"===typeof e&&i.test(e)}for(var r=s,d=[],p=0;p<256;++p)d.push((p+256).toString(16).substr(1));function u(e){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=(d[e[o+0]]+d[e[o+1]]+d[e[o+2]]+d[e[o+3]]+"-"+d[e[o+4]]+d[e[o+5]]+"-"+d[e[o+6]]+d[e[o+7]]+"-"+d[e[o+8]]+d[e[o+9]]+"-"+d[e[o+10]]+d[e[o+11]]+d[e[o+12]]+d[e[o+13]]+d[e[o+14]]+d[e[o+15]]).toLowerCase();if(!r(a))throw TypeError("Stringified UUID is invalid");return a}var c=u;function m(e,o,a){e=e||{};var t=e.random||(e.rng||n)();if(t[6]=15&t[6]|64,t[8]=63&t[8]|128,o){a=a||0;for(var l=0;l<16;++l)o[a+l]=t[l];return o}return c(t)}var f=m},9817:function(e,o,a){a.r(o),a.d(o,{default:function(){return G}});var t=a(9269);const l={class:"row"},n={class:"col"},i={class:"row"},s={class:"col"},r={class:"col"},d=(0,t.Uk)("SAVE");function p(e,o,a,p,u,c){const m=(0,t.up)("AdditionalItems"),f=(0,t.up)("Lines"),w=(0,t.up)("Protocols"),g=(0,t.up)("q-btn"),y=(0,t.up)("q-page-sticky");return(0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t._)("div",l,[(0,t._)("div",n,[(0,t.Wm)(m)])]),(0,t._)("div",i,[(0,t._)("div",s,[(0,t.Wm)(f)])]),((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(e.lines,(e=>((0,t.wg)(),(0,t.iD)("div",{key:e.id,class:"row"},[(0,t._)("div",r,[(0,t.Wm)(w,{title:e.name,lineId:e.id},null,8,["title","lineId"])])])))),128)),(0,t.Wm)(y,{position:"top-right",offset:[18,18]},{default:(0,t.w5)((()=>[(0,t.Wm)(g,{fab:"",color:"primary",onClick:e.calcola},{default:(0,t.w5)((()=>[d])),_:1},8,["onClick"])])),_:1})],64)}var u=a(3961),c=a(3201),m=a(5102);const f=(0,t.Uk)("Lines");function w(e,o,a,l,n,i){const s=(0,t.up)("q-item-label"),r=(0,t.up)("q-input"),d=(0,t.up)("q-popup-edit"),p=(0,t.up)("q-td"),u=(0,t.up)("q-select"),w=(0,t.up)("q-checkbox"),g=(0,t.up)("q-btn"),y=(0,t.up)("q-tr"),b=(0,t.up)("q-table"),h=(0,t.up)("q-card");return(0,t.wg)(),(0,t.j4)(h,{class:"q-pa-sm q-mt-sm"},{default:(0,t.w5)((()=>[(0,t.Wm)(s,{class:"q-mb-sm",overline:""},{default:(0,t.w5)((()=>[f])),_:1}),(0,t.Wm)(b,{columns:e.tableColumns,rows:e.lines,"row-key":"id",dense:"","hide-bottom":"",pagination:{rowsPerPage:0},separator:"cell"},{body:(0,t.w5)((o=>[(0,t.Wm)(y,{props:o},{default:(0,t.w5)((()=>[(0,t.Wm)(p,{key:"name",props:o},{default:(0,t.w5)((()=>[(0,t.Uk)((0,c.zw)(o.row.name)+" ",1),(0,t.Wm)(d,{modelValue:o.row.name,"onUpdate:modelValue":e=>o.row.name=e,"auto-save":""},{default:(0,t.w5)((e=>[(0,t.Wm)(r,{modelValue:e.value,"onUpdate:modelValue":o=>e.value=o,dense:"",autofocus:"",onKeyup:(0,m.D2)(e.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:2},1032,["props"]),(0,t.Wm)(p,{key:"numberOfWasp",props:o},{default:(0,t.w5)((()=>[(0,t.Wm)(u,{dense:"",modelValue:o.row.numberOfWasp,"onUpdate:modelValue":e=>o.row.numberOfWasp=e,modelModifiers:{number:!0},options:[1,2]},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1032,["props"]),(0,t.Wm)(p,{key:"numberOfO2Incubator",props:o},{default:(0,t.w5)((()=>[(0,t.Wm)(u,{dense:"",modelValue:o.row.numberOfO2Incubator,"onUpdate:modelValue":e=>o.row.numberOfO2Incubator=e,modelModifiers:{number:!0},options:e.getAvailableIncubators(o.row.id)},null,8,["modelValue","onUpdate:modelValue","options"])])),_:2},1032,["props"]),(0,t.Wm)(p,{key:"numberOfCO2Incubator",props:o},{default:(0,t.w5)((()=>[(0,t.Wm)(u,{dense:"",modelValue:o.row.numberOfCO2Incubator,"onUpdate:modelValue":e=>o.row.numberOfCO2Incubator=e,modelModifiers:{number:!0},options:e.getAvailableIncubators(o.row.id)},null,8,["modelValue","onUpdate:modelValue","options"])])),_:2},1032,["props"]),(0,t.Wm)(p,{key:"collaborativeStation",props:o},{default:(0,t.w5)((()=>[(0,t.Wm)(w,{dense:"",modelValue:o.row.collaborativeStation,"onUpdate:modelValue":e=>o.row.collaborativeStation=e},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1032,["props"]),(0,t.Wm)(p,{key:"radian",props:o},{default:(0,t.w5)((()=>[(0,t.Wm)(w,{dense:"",modelValue:o.row.radian,"onUpdate:modelValue":e=>o.row.radian=e},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1032,["props"]),(0,t.Wm)(p,{key:"phenomatrix",props:o},{default:(0,t.w5)((()=>[(0,t.Wm)(w,{dense:"",modelValue:o.row.phenomatrix,"onUpdate:modelValue":e=>o.row.phenomatrix=e},null,8,["modelValue","onUpdate:modelValue"])])),_:2},1032,["props"]),(0,t.Wm)(p,{key:"waspOccupancyRate",props:o},{default:(0,t.w5)((()=>[(0,t.Uk)((0,c.zw)(o.row.waspOccupancyRate.toFixed(2))+" % ",1)])),_:2},1032,["props"]),(0,t.Wm)(p,{key:"wasplabOccupancyRate",props:o},{default:(0,t.w5)((()=>[(0,t.Uk)((0,c.zw)(isFinite(o.row.wasplabOccupancyRate)?o.row.wasplabOccupancyRate.toFixed(2)+" %":"N/A"),1)])),_:2},1032,["props"]),(0,t.Wm)(p,{key:"actions",props:o},{default:(0,t.w5)((()=>[(0,t.Wm)(g,{flat:"",round:"",color:"red",icon:"remove_circleoutline",size:"xs",onClick:a=>e.removeLine(o.row.id)},null,8,["onClick"])])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["columns","rows"]),(0,t.Wm)(g,{class:"q-mt-md",label:"Add",type:"button",color:"secondary",size:"sm",onClick:e.addLine},null,8,["onClick"])])),_:1})}var g=a(6830),y=(0,t.aZ)({name:"ConfigLines",setup(){const e=[{name:"name",label:"Name",align:"left",field:e=>e.name},{name:"numberOfWasp",label:"WASP",align:"left",field:e=>e.numberOfWasp},{name:"numberOfO2Incubator",label:"Air incubator",align:"left",field:e=>e.numberOfO2Incubator},{name:"numberOfCO2Incubator",label:"CO2 incubator",align:"left",field:e=>e.numberOfCO2Incubator},{name:"collaborativeStation",label:"Collaborative station",align:"left",field:e=>e.collaborativeStation},{name:"radian",label:"Radian",align:"left",field:e=>e.radian},{name:"phenomatrix",label:"Phenomatrix",align:"left",field:e=>e.phenomatrix},{name:"waspOccupancyRate",label:"WASP Occupancy rate",align:"left",field:e=>e.waspOccupancyRate},{name:"wasplabOccupancyRate",label:"WASPLAB Occupancy rate",align:"left",field:e=>e.wasplabOccupancyRate},{name:"actions",label:"",align:"left",field:e=>e.id}],{lines:o,dailyData:a,primaryProtocols:t}=(0,u.Z)(),l=a.value.find((e=>e.isPeakDay));return{tableColumns:e,lines:o,peakDay:l,primaryProtocols:t}},methods:{addLine(){this.lines.push({id:(0,g.Z)(),collaborativeStation:!1,name:"wasplab "+(this.lines.length+1),numberOfCO2Incubator:0,numberOfO2Incubator:0,numberOfWasp:0,phenomatrix:!1,protocols:[],radian:!1,waspOccupancyRate:0,wasplabOccupancyRate:0});const e=this.lines[this.lines.length-1];e.protocols=[],this.primaryProtocols.forEach((o=>{e?.protocols.push({id:o.id,name:o.name,samples:0,wasp1Percentage:0,wasp2Percentage:0,co2Loading:0,co2Recording:0,co2Unloading:0,o2Loading:0,o2Recording:0,o2Unloading:0,wasp1Broths:0,wasp1Plates:0,wasp1Slides:0,wasp2Broths:0,wasp2Plates:0,wasp2Slides:0})}))},removeLine(e){const o=this.lines.findIndex((o=>o.id==e));o>-1&&this.lines.splice(o,1)},getAvailableIncubators(e){const o=[0],a=this.lines.find((o=>o.id==e));if(a){for(let e=1;e<=3-(a.numberOfO2Incubator+a.numberOfCO2Incubator);e++)o.push(e);return o}return[1,2,3]}}}),b=a(7617),h=a(8055),v=a(3712),k=a(7794),P=a(8231),O=a(7282),W=a(4487),V=a(6931),U=a(1903),_=a(9109),S=a(570),I=a(1410),x=a.n(I);const D=(0,b.Z)(y,[["render",w]]);var C=D;function T(e,o,a,l,n,i){const s=(0,t.up)("q-item-label"),r=(0,t.up)("q-td"),d=(0,t.up)("q-input"),p=(0,t.up)("q-popup-edit"),u=(0,t.up)("q-tr"),f=(0,t.up)("q-table"),w=(0,t.up)("q-card");return(0,t.wg)(),(0,t.j4)(w,{class:"q-pa-sm q-mt-sm"},{default:(0,t.w5)((()=>[(0,t.Wm)(s,{class:"q-mb-sm",overline:""},{default:(0,t.w5)((()=>[(0,t.Uk)((0,c.zw)(e.title),1)])),_:1}),(0,t.Wm)(f,{columns:1==e.line?.numberOfWasp?e.tableColumns1:e.tableColumns2,rows:e.line?.protocols,"row-key":"id",dense:"","hide-bottom":"",pagination:{rowsPerPage:0},separator:"cell"},{body:(0,t.w5)((e=>[(0,t.Wm)(u,{props:e},{default:(0,t.w5)((()=>[(0,t.Wm)(r,{key:"name",props:e},{default:(0,t.w5)((()=>[(0,t.Uk)((0,c.zw)(e.row.name),1)])),_:2},1032,["props"]),(0,t.Wm)(r,{key:"samples",props:e,style:{"background-color":"rgba(0, 0, 0, 0.05)"}},{default:(0,t.w5)((()=>[(0,t.Uk)((0,c.zw)(e.row.samples)+" % ",1),(0,t.Wm)(p,{modelValue:e.row.samples,"onUpdate:modelValue":o=>e.row.samples=o,modelModifiers:{number:!0},"auto-save":""},{default:(0,t.w5)((e=>[(0,t.Wm)(d,{modelValue:e.value,"onUpdate:modelValue":o=>e.value=o,modelModifiers:{number:!0},dense:"",autofocus:"",onKeyup:(0,m.D2)(e.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:2},1032,["props"]),(0,t.Wm)(r,{key:"wasp1Percentage",props:e,style:{"background-color":"rgba(0, 0, 0, 0.05)"}},{default:(0,t.w5)((()=>[(0,t.Uk)((0,c.zw)(e.row.wasp1Percentage)+" % ",1),(0,t.Wm)(p,{modelValue:e.row.wasp1Percentage,"onUpdate:modelValue":o=>e.row.wasp1Percentage=o,modelModifiers:{number:!0},"auto-save":""},{default:(0,t.w5)((e=>[(0,t.Wm)(d,{modelValue:e.value,"onUpdate:modelValue":o=>e.value=o,modelModifiers:{number:!0},dense:"",autofocus:"",onKeyup:(0,m.D2)(e.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:2},1032,["props"]),(0,t.Wm)(r,{key:"wasp1Plates",props:e},{default:(0,t.w5)((()=>[(0,t.Uk)((0,c.zw)(e.row.wasp1Plates.toFixed(0)),1)])),_:2},1032,["props"]),(0,t.Wm)(r,{key:"wasp1Slides",props:e},{default:(0,t.w5)((()=>[(0,t.Uk)((0,c.zw)(e.row.wasp1Slides.toFixed(0)),1)])),_:2},1032,["props"]),(0,t.Wm)(r,{key:"wasp1Broths",props:e},{default:(0,t.w5)((()=>[(0,t.Uk)((0,c.zw)(e.row.wasp1Broths.toFixed(0)),1)])),_:2},1032,["props"]),(0,t.Wm)(r,{key:"wasp2Percentage",props:e,style:{"background-color":"rgba(0, 0, 0, 0.05)"}},{default:(0,t.w5)((()=>[(0,t.Uk)((0,c.zw)(e.row.wasp2Percentage)+" % ",1),(0,t.Wm)(p,{modelValue:e.row.wasp2Percentage,"onUpdate:modelValue":o=>e.row.wasp2Percentage=o,modelModifiers:{number:!0},"auto-save":""},{default:(0,t.w5)((e=>[(0,t.Wm)(d,{modelValue:e.value,"onUpdate:modelValue":o=>e.value=o,modelModifiers:{number:!0},dense:"",autofocus:"",onKeyup:(0,m.D2)(e.set,["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])])),_:2},1032,["modelValue","onUpdate:modelValue"])])),_:2},1032,["props"]),(0,t.Wm)(r,{key:"wasp2Plates",props:e},{default:(0,t.w5)((()=>[(0,t.Uk)((0,c.zw)(e.row.wasp2Plates.toFixed(0)),1)])),_:2},1032,["props"]),(0,t.Wm)(r,{key:"wasp2Slides",props:e},{default:(0,t.w5)((()=>[(0,t.Uk)((0,c.zw)(e.row.wasp2Slides.toFixed(0)),1)])),_:2},1032,["props"]),(0,t.Wm)(r,{key:"wasp2Broths",props:e},{default:(0,t.w5)((()=>[(0,t.Uk)((0,c.zw)(e.row.wasp2Broths.toFixed(0)),1)])),_:2},1032,["props"]),(0,t.Wm)(r,{key:"o2Loading",props:e},{default:(0,t.w5)((()=>[(0,t.Uk)((0,c.zw)(e.row.o2Loading.toFixed(0)),1)])),_:2},1032,["props"]),(0,t.Wm)(r,{key:"co2Loading",props:e},{default:(0,t.w5)((()=>[(0,t.Uk)((0,c.zw)(e.row.co2Loading.toFixed(0)),1)])),_:2},1032,["props"]),(0,t.Wm)(r,{key:"o2Recording",props:e},{default:(0,t.w5)((()=>[(0,t.Uk)((0,c.zw)(e.row.o2Recording.toFixed(0)),1)])),_:2},1032,["props"]),(0,t.Wm)(r,{key:"co2Recording",props:e},{default:(0,t.w5)((()=>[(0,t.Uk)((0,c.zw)(e.row.co2Recording.toFixed(0)),1)])),_:2},1032,["props"]),(0,t.Wm)(r,{key:"o2Unloading",props:e},{default:(0,t.w5)((()=>[(0,t.Uk)((0,c.zw)(e.row.o2Unloading.toFixed(0)),1)])),_:2},1032,["props"]),(0,t.Wm)(r,{key:"co2Unloading",props:e},{default:(0,t.w5)((()=>[(0,t.Uk)((0,c.zw)(e.row.co2Unloading.toFixed(0)),1)])),_:2},1032,["props"])])),_:2},1032,["props"])])),_:1},8,["columns","rows"])])),_:1})}x()(y,"components",{QCard:h.Z,QItemLabel:v.Z,QTable:k.Z,QTr:P.Z,QTd:O.Z,QPopupEdit:W.Z,QInput:V.Z,QSelect:U.Z,QCheckbox:_.Z,QBtn:S.Z});var q=(0,t.aZ)({name:"LineProtocols",props:{title:String,lineId:String},setup(e){const{lines:o,primaryProtocols:a,dailyData:t,weightedDayTimesPerProtocol:l}=(0,u.Z)(),n=t.value.find((e=>e.isPeakDay)),i=l.value.filter((e=>e.dayOfWeek==n?.dayOfWeek)),s=o.value.find((o=>o.id==e.lineId)),r=[{name:"name",label:"Name",align:"left",field:e=>e.name},{name:"samples",label:"Samples",align:"left",field:e=>e.samples},{name:"wasp1Percentage",label:"WASP 1",align:"left",field:e=>e.wasp1Percentage},{name:"wasp1Plates",label:"Plates (1)",align:"left",field:e=>e.wasp1Plates},{name:"wasp1Slides",label:"Slides (1)",align:"left",field:e=>e.wasp1Slides},{name:"wasp1Broths",label:"Broths (1)",align:"left",field:e=>e.wasp1Broths},{name:"o2Loading",label:"Air loading",align:"left",field:e=>e.o2Loading},{name:"co2Loading",label:"CO2 loading",align:"left",field:e=>e.co2Loading},{name:"o2Recording",label:"Air recording",align:"left",field:e=>e.o2Recording},{name:"co2Recording",label:"CO2 recording",align:"left",field:e=>e.co2Recording},{name:"o2Unloading",label:"Air unloading",align:"left",field:e=>e.o2Unloading},{name:"co2Unloading",label:"CO2 unloading",align:"left",field:e=>e.co2Unloading}],d=[];for(const p of r)d.push(p);return d.splice(6,0,{name:"wasp2Percentage",label:"WASP 2",align:"left",field:e=>e.wasp2Percentage}),d.splice(7,0,{name:"wasp2Plates",label:"Plates (2)",align:"left",field:e=>e.wasp2Plates}),d.splice(8,0,{name:"wasp2Slides",label:"Slides (2)",align:"left",field:e=>e.wasp2Slides}),d.splice(9,0,{name:"wasp2Broths",label:"Broths (2)",align:"left",field:e=>e.wasp2Broths}),{tableColumns1:r,tableColumns2:d,lines:o,line:s,weightedPeakDayTimes:i,primaryProtocols:a}}});const Z=(0,b.Z)(q,[["render",T]]);var A=Z;x()(q,"components",{QCard:h.Z,QItemLabel:v.Z,QTable:k.Z,QTr:P.Z,QTd:O.Z,QPopupEdit:W.Z,QInput:V.Z});const R=(0,t.Uk)("Additional Items"),z={class:"row q-gutter-xs"},F={class:"col"},L={class:"col"},Q={class:"col"},B={class:"col"},M={class:"col"};function E(e,o,a,l,n,i){const s=(0,t.up)("q-item-label"),r=(0,t.up)("q-input"),d=(0,t.up)("q-card");return(0,t.wg)(),(0,t.j4)(d,{class:"q-pa-sm q-mt-sm"},{default:(0,t.w5)((()=>[(0,t.Wm)(s,{class:"q-mb-sm",overline:""},{default:(0,t.w5)((()=>[R])),_:1}),(0,t._)("div",z,[(0,t._)("div",F,[(0,t.Wm)(r,{dense:"",filled:"",type:"number",modelValue:e.configuratorAdditionalItems.flo,"onUpdate:modelValue":o[0]||(o[0]=o=>e.configuratorAdditionalItems.flo=o),modelModifiers:{number:!0},label:"Flo","lazy-rules":"",rules:[e=>null!==e&&""!==e||"Please type a valid numeric value"]},null,8,["modelValue","rules"])]),(0,t._)("div",L,[(0,t.Wm)(r,{dense:"",filled:"",type:"number",modelValue:e.configuratorAdditionalItems.colibri,"onUpdate:modelValue":o[1]||(o[1]=o=>e.configuratorAdditionalItems.colibri=o),modelModifiers:{number:!0},label:"Colibrì",hint:e.colibriHint(),"lazy-rules":"",rules:[e=>null!==e&&""!==e||"Please type a valid numeric value"]},null,8,["modelValue","hint","rules"])]),(0,t._)("div",Q,[(0,t.Wm)(r,{dense:"",filled:"",type:"number",modelValue:e.configuratorAdditionalItems.manualStation,"onUpdate:modelValue":o[2]||(o[2]=o=>e.configuratorAdditionalItems.manualStation=o),modelModifiers:{number:!0},label:"Manual station","lazy-rules":"",rules:[e=>null!==e&&""!==e||"Please type a valid numeric value"]},null,8,["modelValue","rules"])]),(0,t._)("div",B,[(0,t.Wm)(r,{dense:"",filled:"",type:"number",modelValue:e.configuratorAdditionalItems.readingStation,"onUpdate:modelValue":o[3]||(o[3]=o=>e.configuratorAdditionalItems.readingStation=o),modelModifiers:{number:!0},label:"Reading station","lazy-rules":"",rules:[e=>null!==e&&""!==e||"Please type a valid numeric value"]},null,8,["modelValue","rules"])]),(0,t._)("div",M,[(0,t.Wm)(r,{dense:"",filled:"",type:"number",modelValue:e.configuratorAdditionalItems.pickingStation,"onUpdate:modelValue":o[4]||(o[4]=o=>e.configuratorAdditionalItems.pickingStation=o),modelModifiers:{number:!0},label:"Picking station","lazy-rules":"",rules:[e=>null!==e&&""!==e||"Please type a valid numeric value"]},null,8,["modelValue","rules"])])])])),_:1})}var H=(0,t.aZ)({name:"AdditionalItems",setup(){const{settings:e,lines:o,primaryProtocols:a,configuratorAdditionalItems:t,colibriTime:l}=(0,u.Z)();return{settings:e,lines:o,primaryProtocols:a,configuratorAdditionalItems:t,colibriTime:l}},methods:{colibriHint(){try{const e=[];this.lines.forEach((o=>{o.protocols.forEach((o=>{const a=e.findIndex((e=>e.protocolId==o.id));a<0?e.push({protocolId:o.id,plates:o.co2Unloading+o.o2Unloading}):e[a].plates+=o.co2Unloading+o.o2Unloading}))}));const o=[];e.forEach((e=>{const a=this.primaryProtocols.find((o=>o.id==e.protocolId));a&&o.push({protocol:a,idTime:e.plates*(a.idPercentage/100)*this.settings.colibri.IDTimeInSeconds,astTime:e.plates*(a.astPercentage/100)*this.settings.colibri.ASTTimeInSeconds,idAstTime:e.plates*(a.astIdPercentage/100)*this.settings.colibri.ASTIDTimeInSeconds})}));const a=o.map((e=>e.idTime+e.astTime+e.idAstTime)).reduce(((e,o)=>e+o));return this.colibriTime=a,0==this.configuratorAdditionalItems.colibri?"0 %":(a/this.configuratorAdditionalItems.colibri/3600*100).toFixed(2)+" %"}catch{return""}}}});const $=(0,b.Z)(H,[["render",E]]);var j=$;x()(H,"components",{QCard:h.Z,QItemLabel:v.Z,QInput:V.Z});var K=(0,t.aZ)({name:"HomeView",components:{Lines:C,Protocols:A,AdditionalItems:j},setup(){const{lines:e,fteHours:o,dailyData:a,weightedDayTimesPerProtocol:t,primaryProtocols:l}=(0,u.Z)(),n=a.value.find((e=>e.isPeakDay)),i=t.value.filter((e=>e.dayOfWeek==n?.dayOfWeek));return{weightedDayTimesPerProtocol:t,weightedPeakDayTimes:i,peakDay:n,fteHours:o,primaryProtocols:l,lines:e}},methods:{saveProtocols(){this.lines.forEach((e=>{e.protocols.forEach((e=>{const o=e.samples,a=e.wasp1Percentage,t=e.wasp2Percentage;e.samples=Number(o.toFixed(2)),e.wasp1Percentage=a,e.wasp2Percentage=t,e.co2Loading=(this.weightedPeakDayTimes.find((o=>"loading_co2"==o.type&&o.protocol==e.id))?.samples||0)*o/100,e.co2Recording=(this.weightedPeakDayTimes.find((o=>"recording_co2"==o.type&&o.protocol==e.id))?.samples||0)*o/100,e.co2Unloading=(this.weightedPeakDayTimes.find((o=>"unloading_co2"==o.type&&o.protocol==e.id))?.samples||0)*o/100,e.o2Loading=(this.weightedPeakDayTimes.find((o=>"loading_air"==o.type&&o.protocol==e.id))?.samples||0)*o/100,e.o2Recording=(this.weightedPeakDayTimes.find((o=>"recording_air"==o.type&&o.protocol==e.id))?.samples||0)*o/100,e.o2Unloading=(this.weightedPeakDayTimes.find((o=>"unloading_air"==o.type&&o.protocol==e.id))?.samples||0)*o/100,e.wasp1Broths=(this.weightedPeakDayTimes.find((o=>"broths"==o.type&&o.protocol==e.id))?.samples||0)*a/100*o/100,e.wasp1Plates=(this.weightedPeakDayTimes.find((o=>"plates"==o.type&&o.protocol==e.id))?.samples||0)*a/100*o/100,e.wasp1Slides=(this.weightedPeakDayTimes.find((o=>"slides"==o.type&&o.protocol==e.id))?.samples||0)*a/100*o/100,e.wasp2Broths=(this.weightedPeakDayTimes.find((o=>"broths"==o.type&&o.protocol==e.id))?.samples||0)*t/100*o/100,e.wasp2Plates=(this.weightedPeakDayTimes.find((o=>"plates"==o.type&&o.protocol==e.id))?.samples||0)*t/100*o/100,e.wasp2Slides=(this.weightedPeakDayTimes.find((o=>"slides"==o.type&&o.protocol==e.id))?.samples||0)*t/100*o/100}))}))},saveConfig(){this.lines.forEach((e=>{let o=0,a=0,t=0,l=0,n=0,i=0,s=0,r=0;const d=e.protocols;d.forEach((d=>{const p=this.weightedDayTimesPerProtocol.filter((e=>e.protocol==d.id&&e.dayOfWeek==this.peakDay?.dayOfWeek&&("plates"==e.type||"slides"==e.type||"broths"==e.type))).map((e=>e.timeInSeconds)).reduce(((e,o)=>e+o))*(d.samples/100)*(d.wasp1Percentage/100)||0;o+=p;const u=this.weightedDayTimesPerProtocol.filter((e=>e.protocol==d.id&&e.dayOfWeek==this.peakDay?.dayOfWeek&&("plates"==e.type||"slides"==e.type||"broths"==e.type))).map((e=>e.timeInSeconds)).reduce(((e,o)=>e+o))*(d.samples/100)*(d.wasp2Percentage/100)||0;a+=u;const c=this.weightedDayTimesPerProtocol.filter((e=>e.protocol==d.id&&e.dayOfWeek==this.peakDay?.dayOfWeek&&"loading_air"==e.type)).map((e=>e.timeInSeconds)).reduce(((e,o)=>e+o))*d.samples/100/e.numberOfO2Incubator||0,m=this.weightedDayTimesPerProtocol.filter((e=>e.protocol==d.id&&e.dayOfWeek==this.peakDay?.dayOfWeek&&"recording_air"==e.type)).map((e=>e.timeInSeconds)).reduce(((e,o)=>e+o))*d.samples/e.numberOfO2Incubator/100||0,f=this.weightedDayTimesPerProtocol.filter((e=>e.protocol==d.id&&e.dayOfWeek==this.peakDay?.dayOfWeek&&"unloading_air"==e.type)).map((e=>e.timeInSeconds)).reduce(((e,o)=>e+o))*d.samples/e.numberOfO2Incubator/100||0;t+=c,l+=m,n+=f;const w=e.numberOfCO2Incubator>0?e.numberOfCO2Incubator:1,g=this.weightedDayTimesPerProtocol.filter((e=>e.protocol==d.id&&e.dayOfWeek==this.peakDay?.dayOfWeek&&"loading_co2"==e.type)).map((e=>e.timeInSeconds)).reduce(((e,o)=>e+o))*d.samples/w/100||0,y=this.weightedDayTimesPerProtocol.filter((e=>e.protocol==d.id&&e.dayOfWeek==this.peakDay?.dayOfWeek&&"recording_co2"==e.type)).map((e=>e.timeInSeconds)).reduce(((e,o)=>e+o))*d.samples/w/100||0,b=this.weightedDayTimesPerProtocol.filter((e=>e.protocol==d.id&&e.dayOfWeek==this.peakDay?.dayOfWeek&&"unloading_co2"==e.type)).map((e=>e.timeInSeconds)).reduce(((e,o)=>e+o))*d.samples/w/100||0;i+=g,s+=y,r+=b})),e.waspOccupancyRate=Math.max(o/3600/(this.fteHours.wasp.end-this.fteHours.wasp.start)*100,a/3600/(this.fteHours.wasp.end-this.fteHours.wasp.start)*100),e.wasplabOccupancyRate=(Math.max(o,a,t,i)+Math.max(l,s)+n+r)/3600/24*100}))},calcola(){this.saveProtocols(),this.saveConfig()}}}),N=a(8579);const Y=(0,b.Z)(K,[["render",p]]);var G=Y;x()(K,"components",{QPageSticky:N.Z,QBtn:S.Z})}}]);
//# sourceMappingURL=configurator.64ad9c33.js.map