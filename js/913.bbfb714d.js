"use strict";(self["webpackChunkcopan_sizing_tool"]=self["webpackChunkcopan_sizing_tool"]||[]).push([[913],{7191:function(e,a,s){function t(e){const a=new Date(Date.UTC(2017,0,1)),s=[];for(let t=0;t<7;t++)s.push(a.toLocaleDateString(e,{weekday:"long"})),a.setDate(a.getDate()+1);return s}function n(e){const a=[],s=[];return e.protocols.forEach((t=>{const n=e.protocols.map((e=>e.samplesPerDayAvg)).reduce(((e,a)=>e+a)),o=[];for(let e=0;e<7;e++)o.push({dayOfWeek:e,samples:0});const d=[];for(let e=0;e<7;e++)d.push({dayOfWeek:e,samples:0});let i=0;const p=Math.max(...t.wasplabData.air.readHours.split(",").map((e=>Number(e)))||[]);if(p>24){const a=new Date,s=new Date(a.getTime()+60*p*60*1e3);i=s.getDay()-a.getDay()-1;for(let d=0;d<7;d++)for(let a=1;a<=i;a++){let s=d+a;s>6&&(s=0);const i=o.findIndex((e=>e.dayOfWeek==d));if(i>=0){const a=o.findIndex((e=>e.dayOfWeek==s));if(a>-1){const s=e.samplesPerDay.find((e=>e.dayOfWeek==d))?.samples||0;o[a].samples+=(t.wasplabData.air?.platesPerSample||0)*(t.samplesPerDayAvg/n*s)}}}}let l=0;const c=Math.max(...t.wasplabData.co2.readHours.split(",").map((e=>Number(e)))||[]);if(c>24){const a=new Date,s=new Date(a.getTime()+60*c*60*1e3);l=s.getDay()-a.getDay()-1;for(let o=0;o<7;o++)for(let a=1;a<=l;a++){let s=o+a;s>6&&(s=0);const i=d.findIndex((e=>e.dayOfWeek==o));if(i>=0){const a=e.samplesPerDay.find((e=>e.dayOfWeek==o))?.samples||0,i=d.findIndex((e=>e.dayOfWeek==s));i>-1&&(d[i].samples+=(t.wasplabData.co2?.platesPerSample||0)*(t.samplesPerDayAvg/n*a))}}}const r=[];for(let a=0;a<7;a++){let s=a+i;s>=7&&(s-=7);const o=e.samplesPerDay.find((e=>e.dayOfWeek==a))?.samples||0;r.push({dayOfWeek:s,samples:(t.wasplabData.air?.platesPerSample||0)*(t.samplesPerDayAvg/n*o)})}const y=[];for(let a=0;a<7;a++){let s=a+l;s>=7&&(s-=7);const o=e.samplesPerDay.find((e=>e.dayOfWeek==a))?.samples||0;y.push({dayOfWeek:s,samples:(t.wasplabData.co2?.platesPerSample||0)*(t.samplesPerDayAvg/n*o)})}for(let m=0;m<7;m++){const i=e.samplesPerDay.find((e=>e.dayOfWeek==m))?.samples||0,p=t.waspData.platesPerSample*(t.samplesPerDayAvg/n*i),l=Math.ceil(p),c=e.settings.plates.streakingPatterns.find((e=>e.pattern==t.waspData.streakingPattern))?.timeInSeconds||0,f=l*c,u=t.waspData.slidesPerSample*(t.samplesPerDayAvg/n*i),g=Math.ceil(u);let I=e.settings.slides.streakingPatterns.find((e=>"slide_and_other"==e.pattern))?.timeInSeconds||0;0==t.waspData.platesPerSample&&(I=e.settings.slides.streakingPatterns.find((e=>"slide_only"==e.pattern))?.timeInSeconds||0);const k=g*I,S=t.waspData.brothsPerSample*(t.samplesPerDayAvg/n*i),O=Math.ceil(S),W=e.settings.broths.timeInSeconds,h=O*W,_=(t.wasplabData.air?.platesPerSample||0)*(t.samplesPerDayAvg/n*i),D=Math.ceil(_),w=e.settings.incubator.loadingPlatesPerHour,b=D/w*3600,P=(t.wasplabData.co2?.platesPerSample||0)*(t.samplesPerDayAvg/n*i),x=Math.ceil(P),v=e.settings.incubator.loadingPlatesPerHour,M=x/v*3600,A=(t.wasplabData.air?.platesPerSample||0)*(t.samplesPerDayAvg/n*i),T=Math.ceil(A+(o.find((e=>e.dayOfWeek==m))?.samples||0)),q=e.settings.incubator.recordingPlatesPerHour,H=T/q*3600,C=(t.wasplabData.co2?.platesPerSample||0)*(t.samplesPerDayAvg/n*i),Z=Math.ceil(C+(d.find((e=>e.dayOfWeek==m))?.samples||0)),j=e.settings.incubator.recordingPlatesPerHour,E=Z/j*3600;let L=e.settings.incubator.unloadingMultiplePlatesPerHour;1==e.settings.incubator.singleIncubator&&(L=e.settings.incubator.unloadingSinglePlatesPerHour);const U=r.find((e=>e.dayOfWeek==m))?.samples||0,z=Math.ceil(U),F=L,N=z/F*3600,Q=y.find((e=>e.dayOfWeek==m))?.samples||0,B=Math.ceil(Q),G=L,J=B/G*3600,K=a.findIndex((e=>"plates"==e.type&&e.dayOfWeek==m));K<0?a.push({type:"plates",dayOfWeek:m,timeInSeconds:f,samples:l}):a[K].timeInSeconds+=f,s.push({type:"plates",dayOfWeek:m,timeInSeconds:f,samples:l,protocol:t.id});const R=a.findIndex((e=>"slides"==e.type&&e.dayOfWeek==m));R<0?a.push({type:"slides",dayOfWeek:m,timeInSeconds:k,samples:g}):a[R].timeInSeconds+=k,s.push({type:"slides",dayOfWeek:m,timeInSeconds:k,samples:g,protocol:t.id});const V=a.findIndex((e=>"broths"==e.type&&e.dayOfWeek==m));V<0?a.push({type:"broths",dayOfWeek:m,timeInSeconds:h,samples:O}):a[V].timeInSeconds+=h,s.push({type:"broths",dayOfWeek:m,timeInSeconds:h,samples:O,protocol:t.id});const X=a.findIndex((e=>"loading_air"==e.type&&e.dayOfWeek==m));X<0?a.push({type:"loading_air",dayOfWeek:m,timeInSeconds:b,samples:D}):a[X].timeInSeconds+=b,s.push({type:"loading_air",dayOfWeek:m,timeInSeconds:b,samples:D,protocol:t.id});const Y=a.findIndex((e=>"loading_co2"==e.type&&e.dayOfWeek==m));Y<0?a.push({type:"loading_co2",dayOfWeek:m,timeInSeconds:M,samples:x}):a[Y].timeInSeconds+=M,s.push({type:"loading_co2",dayOfWeek:m,timeInSeconds:M,samples:x,protocol:t.id});const $=a.findIndex((e=>"recording_air"==e.type&&e.dayOfWeek==m));$<0?a.push({type:"recording_air",dayOfWeek:m,timeInSeconds:H,samples:T}):a[$].timeInSeconds+=H,s.push({type:"recording_air",dayOfWeek:m,timeInSeconds:H,samples:T,protocol:t.id});const ee=a.findIndex((e=>"recording_co2"==e.type&&e.dayOfWeek==m));ee<0?a.push({type:"recording_co2",dayOfWeek:m,timeInSeconds:E,samples:Z}):a[ee].timeInSeconds+=E,s.push({type:"recording_co2",dayOfWeek:m,timeInSeconds:E,samples:Z,protocol:t.id});const ae=a.findIndex((e=>"unloading_air"==e.type&&e.dayOfWeek==m));ae<0?a.push({type:"unloading_air",dayOfWeek:m,timeInSeconds:N,samples:z}):a[ae].timeInSeconds+=N,s.push({type:"unloading_air",dayOfWeek:m,timeInSeconds:N,samples:z,protocol:t.id});const se=a.findIndex((e=>"unloading_co2"==e.type&&e.dayOfWeek==m));se<0?a.push({type:"unloading_co2",dayOfWeek:m,timeInSeconds:J,samples:B}):a[se].timeInSeconds+=J,s.push({type:"unloading_co2",dayOfWeek:m,timeInSeconds:J,samples:B,protocol:t.id})}})),{weightedDaysTimesInSeconds:a,weightedDaysTimesInSecondsPerProtocol:s}}function o(e){const a=[];return e.forEach((e=>{if("plates"==e.type||"slides"==e.type||"broths"==e.type){const s=a.findIndex((a=>a.dayOfWeek==e.dayOfWeek&&"wasp"==a.type));s<0?a.push({type:"wasp",dayOfWeek:e.dayOfWeek,timeInSeconds:e.timeInSeconds}):a[s].timeInSeconds+=e.timeInSeconds}else if("loading_air"==e.type){const s=a.findIndex((a=>a.dayOfWeek==e.dayOfWeek&&"wasplab_air_loading"==a.type));s<0?a.push({type:"wasplab_air_loading",dayOfWeek:e.dayOfWeek,timeInSeconds:e.timeInSeconds}):a[s].timeInSeconds<e.timeInSeconds&&(a[s].timeInSeconds=e.timeInSeconds)}else if("loading_co2"==e.type){const s=a.findIndex((a=>a.dayOfWeek==e.dayOfWeek&&"wasplab_co2_loading"==a.type));s<0?a.push({type:"wasplab_co2_loading",dayOfWeek:e.dayOfWeek,timeInSeconds:e.timeInSeconds}):a[s].timeInSeconds<e.timeInSeconds&&(a[s].timeInSeconds=e.timeInSeconds)}else if("recording_air"==e.type){const s=a.findIndex((a=>a.dayOfWeek==e.dayOfWeek&&"wasplab_air_recording"==a.type));s<0?a.push({type:"wasplab_air_recording",dayOfWeek:e.dayOfWeek,timeInSeconds:e.timeInSeconds}):a[s].timeInSeconds<e.timeInSeconds&&(a[s].timeInSeconds=e.timeInSeconds)}else if("recording_co2"==e.type){const s=a.findIndex((a=>a.dayOfWeek==e.dayOfWeek&&"wasplab_co2_recording"==a.type));s<0?a.push({type:"wasplab_co2_recording",dayOfWeek:e.dayOfWeek,timeInSeconds:e.timeInSeconds}):a[s].timeInSeconds<e.timeInSeconds&&(a[s].timeInSeconds=e.timeInSeconds)}else if("unloading_air"==e.type){const s=a.findIndex((a=>a.dayOfWeek==e.dayOfWeek&&"wasplab_air_unloading"==a.type));s<0?a.push({type:"wasplab_air_unloading",dayOfWeek:e.dayOfWeek,timeInSeconds:e.timeInSeconds}):a[s].timeInSeconds+=e.timeInSeconds}else if("unloading_co2"==e.type){const s=a.findIndex((a=>a.dayOfWeek==e.dayOfWeek&&"wasplab_co2_unloading"==a.type));s<0?a.push({type:"wasplab_co2_unloading",dayOfWeek:e.dayOfWeek,timeInSeconds:e.timeInSeconds}):a[s].timeInSeconds+=e.timeInSeconds}})),a}function d(e){const a=e.data.find((e=>"wasp"==e.type))?.timeInSeconds||0,s=e.data.find((e=>"wasplab_air_loading"==e.type))?.timeInSeconds||0,t=e.data.find((e=>"wasplab_co2_loading"==e.type))?.timeInSeconds||0,n=Math.max(s,t),o=e.data.find((e=>"wasplab_air_recording"==e.type))?.timeInSeconds||0,d=e.data.find((e=>"wasplab_co2_recording"==e.type))?.timeInSeconds||0,i=Math.max(o,d),p=e.data.find((e=>"wasplab_air_unloading"==e.type))?.timeInSeconds||0,l=e.data.find((e=>"wasplab_co2_unloading"==e.type))?.timeInSeconds||0,c=p+l,r=Math.max(a,n)+i+c;return{dayOfWeek:e.dayOfWeek,totalTime:r,percentage:r/3600/24*100,totalSamples:e.samples,isPeakDay:!1}}function i(e){const a=[];for(let s=0;s<7;s++){const t=e.data.filter((e=>e.dayOfWeek==s)),n=d({data:t,dayOfWeek:s,samples:e.samplesPerDay.find((e=>e.dayOfWeek==s))?.samples||0});a.push(n)}return a.sort(((e,a)=>a.totalTime-e.totalTime)),a.forEach((e=>{e.percentage=e.totalTime/a[0].totalTime*100,100==e.percentage&&(e.isPeakDay=!0)})),a.sort(((e,a)=>e.dayOfWeek-a.dayOfWeek)),a}s.d(a,{mg:function(){return n},o2:function(){return o},tu:function(){return t},xL:function(){return i}})},2913:function(e,a,s){s.d(a,{Z:function(){return f}});var t=s(9269);const n=(0,t.Uk)("Daily volumes");function o(e,a,s,o,d,i){const p=(0,t.up)("q-item-label"),l=(0,t.up)("apexchart"),c=(0,t.up)("q-card");return e.dailyData.length>0?((0,t.wg)(),(0,t.j4)(c,{key:0,class:"q-pa-sm q-mt-sm"},{default:(0,t.w5)((()=>[e.showTitle?((0,t.wg)(),(0,t.j4)(p,{key:0,class:"q-mb-sm",overline:""},{default:(0,t.w5)((()=>[n])),_:1})):(0,t.kq)("",!0),(0,t.Wm)(l,{type:"bar",options:e.chartOptions,series:e.series},null,8,["options","series"])])),_:1})):(0,t.kq)("",!0)}var d=s(7191),i=(0,t.aZ)({name:"DailyChart",props:{dailyData:{type:Object,required:!0},showTitle:{type:Object,required:!1}},setup(){const e=(0,d.tu)("en-US");e.push(e[0]),e.splice(0,1);const a={chart:{id:"vuechart-dailydata"},xaxis:{categories:e},yaxis:{max:100},colors:[function({value:e}){return"100.00"==e?"#022A55":"#7794FB"}]};return{weekDays:e,chartOptions:a}},computed:{series(){const e=this.dailyData.map((e=>e.percentage.toFixed(2))),a=[{name:"series-dailydata",data:e}];return a}}}),p=s(7617),l=s(8055),c=s(3712),r=s(1410),y=s.n(r);const m=(0,p.Z)(i,[["render",o]]);var f=m;y()(i,"components",{QCard:l.Z,QItemLabel:c.Z})}}]);
//# sourceMappingURL=913.bbfb714d.js.map